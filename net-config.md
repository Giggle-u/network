# 客户端访问服务器的过程 
---
>  解析出域名对应的IP地址
>  
1.  使用arp协议获取默认网关的mac地址
1.  发送数据给默认网关（数据中的目的地址为DNS服务器）
1.  默认网关将数据转发给路由器
1.  路由器根据指定的路由协议将数据转发给目的网关
1.  目的网关将数据转发给DNS服务器
1.  DNS服务器查询解析出域名对应的IP，并将IP地址原路返回给客户端
>   
> TCP三次握手进行连接

> HTTP协议发送请求数据
> 
> Web服务器查询得到相应结果，原路返回给浏览器
> 
> 浏览器接收到数据后通过渲染功能来显示页面
> 
> 浏览器与服务器经过4次挥手，关闭tcp连接
> >（客户端调用close，发送0字节的数据，服务器发送接收命令，并调用close，客户端发送确人命令）
> 
> 完成整个访问过程

# IP地址和MAC地址
---
> IP为逻辑标记，指明终点目的地，具体的路径由mac和路由来实现
> 
 ![](https://i.imgur.com/wDMMhxt.png)
 
> 先使用ARP协议获得网关（设置在交换机1上）的MAC地址，之后使用IGMP协议（ping命令）发送数据包。
> 
![](https://i.imgur.com/EvXIvVW.png)
>
>交换机具有学习的能力，可以学到链接端口的mac地址和IP，因为同网络的主机是可以互访的，所以交换机连接的同网段的设备默认可以访问
>
![](https://i.imgur.com/Ceqe0iH.png)
>
> PC1在跨网段访问时，需要路由器（现在的交换机有路由的功能）指定下一跳的地址
> 
 ![](https://i.imgur.com/2kVrkmO.png)
> 
> 交换机1上指明要去3.3.3.0段网络时的下一跳为2.2.2.2
> 
> 交换机2需要同样的操作来确保返回的数据可以发送回PC1
> 
![](https://i.imgur.com/tswHY6p.png) 

> 交换机中的路由表为：
> 
![](https://i.imgur.com/37neqma.png)
> 
![](https://i.imgur.com/EhS2set.png)




